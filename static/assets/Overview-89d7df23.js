import{L as l,r as a,a0 as t,a1 as e,c as s,o as u,d as r,e as n,f as d,w as c,F as o,O as v,x as i,A as b,a2 as p}from"./index-996b1aff.js";import{_}from"./_plugin-vue_export-helper-1b428a4d.js";const f={class:"dashboard-overview"},m={class:"card-grid"},y={class:"bar-label"},h={class:"bar-track"},g={class:"bar-value"},w={class:"sysinfo-table"},I={class:"sysinfo-table"},k=_({__name:"Overview",setup(_){const k=a({}),x=a([]),j=a(""),O=a("");let C=null;const T=async()=>{var a;if(!document.hidden)try{if(!localStorage.getItem("current_project_id"))return;const t=await l.get("/dashboard/overview"),e=null==(a=t.data)?void 0:a.resources;if(!e)return;k.value=t.data.state,j.value=t.data.core_version,O.value=t.data.sys_version;const{cpu:s,memory:u,disk:r}=e;x.value=[{label:"CPU",percent:s.percent,value:s.value,status:s.status},{label:"内存",percent:u.percent,value:u.value,status:u.status},{label:"硬盘",percent:r.percent,value:r.value,status:r.status}]}catch(t){}};return t((()=>{C||(T(),C=setInterval(T,8e3))})),e((()=>{C&&(clearInterval(C),C=null)})),(l,a)=>{const t=s("el-card");return u(),r("div",f,[n("div",m,[d(t,{class:"card multi-bar-card"},{default:c((()=>[(u(!0),r(o,null,v(x.value,(l=>(u(),r("div",{class:"multi-bar-row",key:l.label},[n("div",y,i(l.label),1),n("div",h,[n("div",{class:b(["bar-fill",l.status]),style:p({width:l.percent+"%"})},null,6)]),n("div",g,i(l.value),1)])))),128))])),_:1}),d(t,{class:"card"},{default:c((()=>[a[4]||(a[4]=n("div",{class:"card-title"},"引擎信息",-1)),n("table",w,[n("tbody",null,[n("tr",null,[a[0]||(a[0]=n("td",null,"进程ID：",-1)),n("td",null,[n("b",null,i(k.value.process_id),1)])]),n("tr",null,[a[1]||(a[1]=n("td",null,"数据源数：",-1)),n("td",null,[n("b",null,i(k.value.data_source_count),1)])]),n("tr",null,[a[2]||(a[2]=n("td",null,"策略数：",-1)),n("td",null,[n("b",null,i(k.value.strategy_count),1)])]),n("tr",null,[a[3]||(a[3]=n("td",null,"执行器数：",-1)),n("td",null,[n("b",null,i(k.value.executor_count),1)])])])])])),_:1}),d(t,{class:"card"},{default:c((()=>[a[9]||(a[9]=n("div",{class:"card-title"},"系统信息",-1)),n("table",I,[n("tbody",null,[n("tr",null,[a[5]||(a[5]=n("td",null,"CORE版本：",-1)),n("td",null,[n("b",null,i(j.value),1)])]),n("tr",null,[a[6]||(a[6]=n("td",null,"系统版本：",-1)),n("td",null,[n("b",null,i(O.value),1)])]),a[7]||(a[7]=n("tr",null,[n("td",null,"开源协议："),n("td",null,[n("b",null,"MIT")])],-1)),a[8]||(a[8]=n("tr",null,[n("td",null,"开源地址："),n("td",null,[n("b",null,[n("a",{href:"https://github.com/orgs/TechHares/repositories",target:"_blank"},"leek")])])],-1))])])])),_:1})])])}}},[["__scopeId","data-v-dc3d4b1c"]]);export{k as default};
