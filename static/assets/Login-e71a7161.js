import{u as e,a,r as l,b as s,c as o,o as r,d as u,e as n,f as d,w as t,g as i,h as p,i as c,l as m,E as f,j as g,k as _}from"./index-996b1aff.js";import{_ as v}from"./logo-42795f0e.js";import{_ as w}from"./_plugin-vue_export-helper-1b428a4d.js";const b={class:"login-container"},y={class:"login-box"},x=w({__name:"Login",setup(w){const x=e(),h=a(),k=l(!1),V=l(""),j=l(null),q=s({username:"",password:""}),C={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},F=e=>{V.value=e},B=()=>{V.value=""},L=async()=>{j.value&&j.value.validate((async e=>{var a,l;if(!e)return!1;k.value=!0;try{await m(q),f.success("登录成功");const e=h.query.redirect||"/";x.push(e)}catch(s){f.error((null==(l=null==(a=s.response)?void 0:a.data)?void 0:l.detail)||"登录失败")}finally{k.value=!1}}))};return(e,a)=>{const l=o("el-icon"),s=o("el-input"),m=o("el-form-item"),f=o("el-button"),w=o("el-form");return r(),u("div",b,[n("div",y,[a[7]||(a[7]=n("div",{class:"logo-container"},[n("img",{src:v,alt:"Logo",class:"logo"})],-1)),d(w,{ref_key:"loginFormRef",ref:j,model:q,rules:C,"label-width":"0",onKeyup:i(L,["enter"])},{default:t((()=>[d(m,{prop:"username"},{default:t((()=>[d(s,{modelValue:q.username,"onUpdate:modelValue":a[0]||(a[0]=e=>q.username=e),placeholder:"用户名",tabindex:"1",onFocus:a[1]||(a[1]=e=>F("username")),onBlur:B,onClick:a[2]||(a[2]=e=>{})},{prefix:t((()=>[d(l,null,{default:t((()=>[d(p(g))])),_:1})])),_:1},8,["modelValue"])])),_:1}),d(m,{prop:"password"},{default:t((()=>[d(s,{modelValue:q.password,"onUpdate:modelValue":a[3]||(a[3]=e=>q.password=e),type:"password",placeholder:"密码","show-password":"",tabindex:"2",onFocus:a[4]||(a[4]=e=>F("password")),onBlur:B,onClick:a[5]||(a[5]=e=>{})},{prefix:t((()=>[d(l,null,{default:t((()=>[d(p(_))])),_:1})])),_:1},8,["modelValue"])])),_:1}),d(m,null,{default:t((()=>[d(f,{type:"primary",loading:k.value,class:"login-button",onClick:L,tabindex:"3"},{default:t((()=>a[6]||(a[6]=[c(" 登录 ")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])])}}},[["__scopeId","data-v-e42793b5"]]);export{x as default};
